server:
  port: ${SERVER_PORT:8082}

spring:

  datasource:
    url: ${DB_URL:jdbc:h2:mem:todo;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;DATABASE_TO_UPPER=false;DEFAULT_NULL_ORDERING=HIGH}
    username: ${DB_USER:sa}
    password: ${DB_PASSWORD:}
  jpa:
    hibernate:
      ddl-auto: none
  flyway:
    locations: classpath:dbmigration
jwt:
  issuer: "tickr-api"
  audience: "tickr-web"
  secretB64: "${JWT_HS384_SECRET_B64:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==}"
  ttlSeconds: 900
  clockSkewSeconds: 60
  version: 1
  jwksUri: null
  acceptRS256: false
  rsaPrivateKeyPem: null
  rsaKeyId: null
  jwksCacheTtlSeconds: 300
  jwksCacheRefreshSeconds: 30

# Rate Limiting Configuration
# Follows Open/Closed Principle - allows configuration changes without code modification
rate-limit:
  enabled: ${RATE_LIMIT_ENABLED:true}
  max-requests: ${RATE_LIMIT_MAX_REQUESTS:5}
  window-minutes: ${RATE_LIMIT_WINDOW_MINUTES:1}
  paths:
    - /api/auth/

# Email Provider Configuration
# Follows Dependency Inversion Principle - EmailService depends on EmailProvider abstraction
# Supports multiple providers without code changes (Open/Closed Principle)
email:
  provider: ${EMAIL_PROVIDER:logging}  # Options: logging, sendgrid, aws-ses, smtp

  # SendGrid configuration (used when provider=sendgrid)
  sendgrid:
    api-key: ${SENDGRID_API_KEY:}
    default-from: ${SENDGRID_FROM:noreply@todolist.com}
    enabled: ${SENDGRID_ENABLED:false}

app:
  cors:
    allowed-origins:
      - http://localhost:3000
      - http://localhost:3001
      - http://localhost:5173
      - https://v0.app
      - https://v0.dev
    allowed-origin-patterns:
      - https://*.v0.app
      - https://*.v0.dev
